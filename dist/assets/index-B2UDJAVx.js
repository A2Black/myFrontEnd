import{d as F,r as i,a as I,i as N,c as U,b as e,f as o,h as T,y as z,e as c,w as u,F as M,o as O,g,t as S}from"./index-DAzvbAht.js";import{c as j,e as q}from"./edit_admin-DnPkGjF0.js";import{_ as G}from"./delete_admin.vue_vue_type_script_setup_true_lang-C_A0FCbJ.js";import{b as H}from"./bread_crumb-BVsCHufp.js";import{b as d}from"./mitt-CdlF-dbX.js";import{r as p,s as J,g as K}from"./userinfor-5i_LEdTx.js";import"./setting-COqKDi4v.js";import"./index-Cyc5mHF5.js";import"./operation-DqFEevio.js";import"./operation_log-B2181nWq.js";import"./SvgIcon-CrgHh77p.js";const Q={class:"table-wrapped"},R={class:"table-top"},W={class:"table-header"},X={class:"search-wrapped"},Y={class:"button-wrapped"},Z={class:"table-content"},ee={class:"table-footer"},me=F({__name:"index",setup(te){const k=i(),x=i({first:"用户管理",second:"用户管理员"}),_=i(),l=i([]),A=async()=>{l.value=await J(_.value,"用户管理员")},n=I({pageCount:1,currentPage:1}),v=i(0),b=async()=>{const t=await K("用户管理员");v.value=t.length,n.pageCount=Math.ceil(t.length/10)};b();const y=async()=>{l.value=await p(1,"用户管理员")};y();const P=async t=>{n.currentPage=t,l.value=await p(n.currentPage,"用户管理员")};d.on("adminDialogOff",async t=>{const a=n.currentPage;t==1&&y(),t==2&&(l.value=await p(n.currentPage,"用户管理员")),t==3&&(l.value=await p(n.currentPage,"用户管理员"),l.value.length==0&&(n.currentPage=a-1,l.value=await p(n.currentPage,"用户"),b()))});const C=i(),D=t=>{d.emit("createId",t),C.value.open()},h=i(),V=t=>{d.emit("editId",t),h.value.open()},w=i(),$=t=>{d.emit("deleteId",t),w.value.open()};return N(()=>{d.all.clear()}),(t,a)=>{const B=c("el-input"),f=c("el-button"),r=c("el-table-column"),E=c("el-table"),L=c("el-pagination");return O(),U(M,null,[e(H,{ref_key:"breadcrumb",ref:k,item:x.value},null,8,["item"]),o("div",Q,[o("div",R,[o("div",W,[o("div",X,[e(B,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=s=>_.value=s),style:{width:"240px"},placeholder:"输入账号进行搜索","suffix-icon":T(z),onChange:a[1]||(a[1]=s=>A())},null,8,["modelValue","suffix-icon"])]),o("div",Y,[e(f,{type:"primary",onClick:a[2]||(a[2]=s=>D(2)),round:""},{default:u(()=>a[3]||(a[3]=[g("添加用户管理员")])),_:1})])]),o("div",Z,[e(E,{data:l.value,style:{width:"100%"},border:""},{default:u(()=>[e(r,{type:"index"}),e(r,{prop:"account",label:"账号"}),e(r,{prop:"name",label:"姓名"}),e(r,{prop:"sex",label:"性别"}),e(r,{prop:"department",label:"部门"}),e(r,{prop:"email",label:"邮箱"}),e(r,{prop:"update_time",label:"更新时间"},{default:u(({row:s})=>{var m;return[o("div",null,S((m=s.update_time)==null?void 0:m.slice(0,10)),1)]}),_:1}),e(r,{label:"操作",width:"180"},{default:u(({row:s})=>[o("div",null,[e(f,{type:"success",onClick:m=>V(s.id),round:""},{default:u(()=>a[4]||(a[4]=[g("编辑")])),_:2},1032,["onClick"]),e(f,{type:"danger",onClick:m=>$(s),round:""},{default:u(()=>a[5]||(a[5]=[g("删除")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])]),o("div",ee,[e(L,{"page-size":1,"pager-count":7,layout:"prev, pager, next",total:v.value,"page-count":n.pageCount,"current-page":n.currentPage,onCurrentChange:P},null,8,["total","page-count","current-page"])])]),e(j,{ref_key:"CreateAdmin",ref:C},null,512),e(q,{ref_key:"EditAdmin",ref:h},null,512),e(G,{ref_key:"DeleteAdmin",ref:w},null,512)],64)}}});export{me as default};
