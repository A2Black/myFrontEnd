import{o as V,p as x}from"./userinfor-5i_LEdTx.js";import{t as f}from"./operation-DqFEevio.js";import{b as t}from"./mitt-CdlF-dbX.js";import{d as B,r as s,i as U,j as w,w as r,e as p,o as c,c as v,f as C,b as h,g as E,E as n}from"./index-DAzvbAht.js";const N={key:0},D={key:1},I={class:"dialog-footer"},q=B({__name:"delete_admin",emits:["success"],setup(S,{expose:_,emit:T}){const a=s(!1);_({open:()=>{a.value=!0}});const o=s(),m=s(),i=s(),u=s(),d=s();t.on("deleteId",async e=>{o.value=e.id,m.value=e.name}),t.on("deleteUserId",async e=>{i.value=e.id,u.value=e.account,d.value=e.name});const g=async()=>{o.value&&((await V(o.value)).status===0?(n({message:"对管理员进行降级成功！",type:"success"}),f("管理员",localStorage.getItem("name"),m.value,"高级",0),t.emit("adminDialogOff",3),a.value=!1):(n.error("对管理员进行降级失败！请重新操作"),a.value=!1)),i.value&&((await x(i.value,u.value)).status===0?(n({message:"删除用户成功！",type:"success"}),f("用户",localStorage.getItem("name"),d.value,"高级",0),t.emit("offDialog",3),a.value=!1):(n.error("删除用户失败！请重新操作"),a.value=!1))};return U(()=>{t.all.clear()}),(e,l)=>{const y=p("el-button"),b=p("el-dialog");return c(),w(b,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=k=>a.value=k),title:"删除操作",width:"30%",center:"",draggable:""},{footer:r(()=>[C("div",I,[h(y,{type:"primary",onClick:g},{default:r(()=>l[1]||(l[1]=[E(" 确认 ")])),_:1})])]),default:r(()=>[o.value?(c(),v("span",N,"是否取消该用户的管理员职位?删除后该该用户将展现在用户列表中")):(c(),v("span",D,"请慎重操作,删除后此用户将永久失去登陆资格"))]),_:1},8,["modelValue"])}}});export{q as _};
