import{e as C}from"./setting-CuWevEhT.js";import{f as M,h as T,i as z}from"./userinfor-BbJqMvvF.js";import{b as _}from"./mitt-CdlF-dbX.js";import{d as I,r as V,a as x,i as B,j as w,w as t,e as u,o as g,f as y,b as e,c as E,l as $,F as N,g as O,E as U,_ as R}from"./index-C-sImJSJ.js";const G={class:"dialog-content"},H={class:"dialog-footer"},J=I({__name:"create_admin",setup(j,{expose:q}){const c=V();_.on("createId",m=>{m===1&&(c.value="新建产品管理员",l.identity="产品管理员"),m===2&&(c.value="新建用户管理员",l.identity="用户管理员"),m===3&&(c.value="新建消息管理员",l.identity="消息管理员")});const k=V([]);(async()=>{k.value=await C()})();const l=x({account:null,password:"",name:"",sex:"",email:"",department:"",identity:""}),f=x({account:[{required:!0,message:"请输入需要添加的管理员账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入管理员姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择管理员性别",trigger:"blur"}],email:[{required:!0,message:"请输入管理员邮箱",trigger:"blur"}],department:[{required:!0,message:"请选择管理员的部门",trigger:"blur"}]}),A=async()=>{(await M(l)).status===0?(U({message:"创建管理员账号成功！",type:"success"}),_.emit("adminDialogOff",1),D(),d.value=!1):(U.error("创建管理员账号失败，请重新创建"),d.value=!1)},D=()=>{l.account=null,l.password="",l.name="",l.sex="",l.email="",l.department=""},d=V(!1);return q({open:()=>{d.value=!0}}),B(()=>{_.all.clear()}),(m,o)=>{const p=u("el-input"),i=u("el-form-item"),b=u("el-option"),v=u("el-select"),F=u("el-form"),r=u("el-button"),L=u("el-dialog");return g(),w(L,{modelValue:d.value,"onUpdate:modelValue":o[6]||(o[6]=s=>d.value=s),title:c.value,width:"600px","align-center":"",draggable:""},{footer:t(()=>[y("div",H,[e(r,{type:"primary",onClick:A},{default:t(()=>o[7]||(o[7]=[O(" 确认 ")])),_:1})])]),default:t(()=>[y("div",G,[e(F,{ref:"ruleFormRef",model:l,rules:f,"label-width":"60px"},{default:t(()=>[e(i,{label:"账号",prop:"account"},{default:t(()=>[e(p,{modelValue:l.account,"onUpdate:modelValue":o[0]||(o[0]=s=>l.account=s)},null,8,["modelValue"])]),_:1}),e(i,{label:"密码",prop:"password"},{default:t(()=>[e(p,{modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=s=>l.password=s)},null,8,["modelValue"])]),_:1}),e(i,{label:"姓名",prop:"name"},{default:t(()=>[e(p,{modelValue:l.name,"onUpdate:modelValue":o[2]||(o[2]=s=>l.name=s)},null,8,["modelValue"])]),_:1}),e(i,{label:"性别",prop:"sex"},{default:t(()=>[e(v,{modelValue:l.sex,"onUpdate:modelValue":o[3]||(o[3]=s=>l.sex=s),placeholder:"请选择性别"},{default:t(()=>[e(b,{label:"男",value:"男"}),e(b,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"邮箱",prop:"email"},{default:t(()=>[e(p,{modelValue:l.email,"onUpdate:modelValue":o[4]||(o[4]=s=>l.email=s)},null,8,["modelValue"])]),_:1}),e(i,{label:"部门",prop:"department"},{default:t(()=>[e(v,{modelValue:l.department,"onUpdate:modelValue":o[5]||(o[5]=s=>l.department=s),placeholder:"请选择部门"},{default:t(()=>[(g(!0),E(N,null,$(k.value,s=>(g(),w(b,{key:s,label:s,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])}}}),Z=R(J,[["__scopeId","data-v-6154673e"]]),K={class:"dialog-content"},P={class:"dialog-footer"},Q=I({__name:"edit_admin",setup(j,{expose:q}){const c=V([]);(async()=>{c.value=await C()})(),_.on("editId",async d=>{const a=await T(d);n.id=a.id,n.account=a.account,n.name=a.name,n.sex=a.sex,n.email=a.email,n.department=a.department});const n=x({id:null,account:null,name:"",sex:"",email:"",department:""}),l=x({account:[{required:!0,message:"请输入需要添加的管理员账号",trigger:"blur"}],name:[{required:!0,message:"请输入管理员姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择管理员性别",trigger:"blur"}],email:[{required:!0,message:"请输入管理员邮箱",trigger:"blur"}],department:[{required:!0,message:"请选择管理员的部门",trigger:"blur"}]}),f=V(!1);q({open:()=>{f.value=!0}});const D=async()=>{(await z(n)).status===0?(U({message:"编辑管理员信息成功！",type:"success"}),_.emit("adminDialogOff",2),f.value=!1):(U.error("编辑管理员信息失败，请重新创建"),f.value=!1)};return B(()=>{_.all.clear()}),(d,a)=>{const m=u("el-input"),o=u("el-form-item"),p=u("el-option"),i=u("el-select"),b=u("el-form"),v=u("el-button"),F=u("el-dialog");return g(),w(F,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=r=>f.value=r),title:"编辑管理员信息",width:"600px","align-center":"",draggable:""},{footer:t(()=>[y("div",P,[e(v,{type:"primary",onClick:D},{default:t(()=>a[6]||(a[6]=[O(" 确认 ")])),_:1})])]),default:t(()=>[y("div",K,[e(b,{ref:"ruleFormRef",model:n,rules:l,"label-width":"60px"},{default:t(()=>[e(o,{label:"账号",prop:"account"},{default:t(()=>[e(m,{modelValue:n.account,"onUpdate:modelValue":a[0]||(a[0]=r=>n.account=r),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"姓名",prop:"name"},{default:t(()=>[e(m,{modelValue:n.name,"onUpdate:modelValue":a[1]||(a[1]=r=>n.name=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"性别",prop:"sex"},{default:t(()=>[e(i,{modelValue:n.sex,"onUpdate:modelValue":a[2]||(a[2]=r=>n.sex=r),placeholder:"请选择性别"},{default:t(()=>[e(p,{label:"男",value:"男"}),e(p,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"邮箱",prop:"email"},{default:t(()=>[e(m,{modelValue:n.email,"onUpdate:modelValue":a[3]||(a[3]=r=>n.email=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"部门",prop:"department"},{default:t(()=>[e(i,{modelValue:n.department,"onUpdate:modelValue":a[4]||(a[4]=r=>n.department=r),placeholder:"请选择部门"},{default:t(()=>[(g(!0),E(N,null,$(c.value,r=>(g(),w(p,{key:r,label:r,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])}}}),h=R(Q,[["__scopeId","data-v-36edb75a"]]);export{Z as c,h as e};
