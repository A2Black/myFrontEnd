import{j as w,k as x,l as I}from"./message-CRz6RGfg.js";import{u as h,e as B,d as M}from"./message-B7MKJIPt.js";import{b as n}from"./mitt-CdlF-dbX.js";import{d as C,r as c,i as D,j as R,w as d,e as p,o as u,f as _,c as m,k as j,b as L,g as N,E as o,_ as S}from"./index-DAzvbAht.js";const U={class:"warning-text"},E={key:0},A={key:1},F={key:2},T={class:"dialog-footer"},q=C({__name:"delete",emits:["success"],setup(z,{expose:f,emit:g}){const v=h(),a=c(!1);f({open:()=>{a.value=!0}});const s=c(),t=c(),l=c();n.on("firstdeleteMsgId",e=>{s.value="删除消息",t.value=e.id,l.value=e.message_receipt_object}),n.on("reMessageId",e=>{s.value="还原操作",t.value=e.id,l.value=e.message_receipt_object}),n.on("realDeleteId",e=>{s.value="永久删除公告",t.value=e});const i=g,b=async()=>{s.value=="删除消息"&&((await w(t.value)).status===0?(o({message:"删除公告成功！",type:"success"}),await B(l.value,t.value),v.returnReadList(localStorage.getItem("id")),i("success"),a.value=!1):(o.error("删除公告失败！请重新操作"),a.value=!1)),s.value=="还原操作"&&((await x(t.value)).status===0?(o({message:"还原公告成功！",type:"success"}),await M(l.value,t.value),v.returnReadList(localStorage.getItem("id")),i("success"),a.value=!1):(o.error("还原公告失败！请重新操作"),a.value=!1)),s.value=="永久删除公告"&&((await I(t.value)).status===0?(o({message:"永久删除公告成功！",type:"success"}),i("success"),a.value=!1):(o.error("永久删除公告失败！请重新操作"),a.value=!1))};return D(()=>{n.all.clear()}),(e,r)=>{const k=p("el-button"),y=p("el-dialog");return u(),R(y,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=V=>a.value=V),title:s.value,width:"20%",center:"",draggable:""},{footer:d(()=>[_("div",T,[L(k,{type:"primary",onClick:b},{default:d(()=>r[1]||(r[1]=[N(" 确认 ")])),_:1})])]),default:d(()=>[_("div",U,[s.value=="删除消息"?(u(),m("span",E,"您确认删除公告吗?删除后可在回收站找到")):s.value=="还原操作"?(u(),m("span",A,"您确认还原公告吗?")):s.value=="永久删除消息"?(u(),m("span",F,"您确认永久删除公告吗?")):j("",!0)])]),_:1},8,["modelValue","title"])}}}),P=S(q,[["__scopeId","data-v-520aba0d"]]);export{P as r};
