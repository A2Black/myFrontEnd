import{b as P}from"./bread_crumb-CidfeB9Y.js";import{r as D}from"./delete-BV7Hfy5u.js";import{h as L,i as y}from"./message-Dj9p4ND2.js";import{b as u}from"./mitt-CdlF-dbX.js";import{d as B,r as i,a as T,i as F,c as I,b as e,f as l,w as n,e as g,F as N,o as R,t as V,g as f,_ as S}from"./index-C-sImJSJ.js";import"./SvgIcon-CJygAaLK.js";import"./message-BCHN95fF.js";import"./index-uR4T4Urx.js";const $={class:"table-wrapped"},j={class:"table-top"},z={class:"table-contentt"},A={class:"table-footer"},E=B({__name:"index",setup(U){const C=i(),v=i({first:"消息管理",second:"回收站"}),p=i([]),d=i(),M=t=>{u.emit("reMessageId",t),d.value.open()},h=t=>{u.emit("realDeleteId",t),d.value.open()},a=T({recycleMessageTotal:1,recycleMessagePageCount:1,recycleMessageCurrentPage:1}),_=async()=>{const t=await L();a.recycleMessageTotal=t.length,a.recycleMessagePageCount=Math.ceil(t.length/10)};_();const m=async()=>{p.value=await y(1),_()};m();const x=async t=>{a.recycleMessageCurrentPage=t,p.value=await y(a.recycleMessageCurrentPage)};return F(()=>{u.all.clear()}),(t,o)=>{const s=g("el-table-column"),b=g("el-button"),k=g("el-table"),w=g("el-pagination");return R(),I(N,null,[e(P,{ref_key:"breadcrumb",ref:C,item:v.value},null,8,["item"]),l("div",$,[l("div",j,[l("div",z,[e(k,{data:p.value,style:{width:"100%"},border:""},{default:n(()=>[e(s,{type:"index",width:"50"}),e(s,{prop:"message_title",label:"消息主题"}),e(s,{prop:"message_category",label:"所属类别"}),e(s,{prop:"message_publish_department",label:"发布部门"}),e(s,{prop:"message_receipt_object",label:"接收对象"}),e(s,{prop:"message_delete_time",label:"删除日期"},{default:n(({row:r})=>{var c;return[l("div",null,V((c=r.message_delete_time)==null?void 0:c.slice(0,10)),1)]}),_:1}),e(s,{label:"操作",width:"300",fixed:"right"},{default:n(({row:r})=>[l("div",null,[e(b,{type:"success",onClick:c=>M(r)},{default:n(()=>o[0]||(o[0]=[f("还原")])),_:2},1032,["onClick"]),e(b,{type:"danger",onClick:c=>h(r.id)},{default:n(()=>o[1]||(o[1]=[f("删除")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])]),l("div",A,[e(w,{"page-size":1,"pager-count":7,layout:"prev, pager, next",total:a.recycleMessageTotal,"page-count":a.recycleMessagePageCount,"current-page":a.recycleMessageCurrentPage,onCurrentChange:x},null,8,["total","page-count","current-page"])])]),e(D,{ref_key:"rad",ref:d,onSuccess:m},null,512)],64)}}}),X=S(E,[["__scopeId","data-v-2b822ad7"]]);export{X as default};
