import{d as L,r as i,a as F,i as N,c as U,b as e,f as o,h as T,y as z,e as u,w as c,F as M,o as O,g,t as S,_ as j}from"./index-C-sImJSJ.js";import{c as q,e as G}from"./edit_admin-BkGqrJAt.js";import{_ as H}from"./delete_admin.vue_vue_type_script_setup_true_lang-DqmB-MKS.js";import{b as J}from"./bread_crumb-CidfeB9Y.js";import{b as d}from"./mitt-CdlF-dbX.js";import{r as p,s as K,g as Q}from"./userinfor-BbJqMvvF.js";import"./setting-CuWevEhT.js";import"./index-uR4T4Urx.js";import"./operation-B5PoYkAs.js";import"./operation_log-CA730Brd.js";import"./SvgIcon-CJygAaLK.js";const R={class:"table-wrapped"},W={class:"table-top"},X={class:"table-header"},Y={class:"search-wrapped"},Z={class:"button-wrapped"},ee={class:"table-content"},te={class:"table-footer"},ae=L({__name:"index",setup(ne){const x=i(),k=i({first:"用户管理",second:"产品管理员"}),_=i(),l=i([]),A=async()=>{l.value=await K(_.value,"产品管理员")},n=F({pageCount:1,currentPage:1}),v=i(0),b=async()=>{const t=await Q("产品管理员");v.value=t.length,n.pageCount=Math.ceil(t.length/10)};b();const y=async()=>{l.value=await p(1,"产品管理员")};y();const P=async t=>{n.currentPage=t,l.value=await p(n.currentPage,"产品管理员")};d.on("adminDialogOff",async t=>{const a=n.currentPage;t==1&&y(),t==2&&(l.value=await p(n.currentPage,"产品管理员")),t==3&&(l.value=await p(n.currentPage,"产品管理员"),l.value.length==0&&(n.currentPage=a-1,l.value=await p(n.currentPage,"产品管理员"),b()))});const C=i(),D=t=>{d.emit("createId",t),C.value.open()},h=i(),V=t=>{d.emit("editId",t),h.value.open()},w=i(),$=t=>{d.emit("deleteId",t),w.value.open()};return N(()=>{d.all.clear()}),(t,a)=>{const B=u("el-input"),f=u("el-button"),r=u("el-table-column"),E=u("el-table"),I=u("el-pagination");return O(),U(M,null,[e(J,{ref_key:"breadcrumb",ref:x,item:k.value},null,8,["item"]),o("div",R,[o("div",W,[o("div",X,[o("div",Y,[e(B,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=s=>_.value=s),style:{width:"240px"},placeholder:"输入账号进行搜索","suffix-icon":T(z),onChange:a[1]||(a[1]=s=>A())},null,8,["modelValue","suffix-icon"])]),o("div",Z,[e(f,{type:"primary",onClick:a[2]||(a[2]=s=>D(1)),round:""},{default:c(()=>a[3]||(a[3]=[g("添加产品管理员")])),_:1})])]),o("div",ee,[e(E,{data:l.value,style:{width:"100%"},border:""},{default:c(()=>[e(r,{type:"index"}),e(r,{prop:"account",label:"账号"}),e(r,{prop:"name",label:"姓名"}),e(r,{prop:"sex",label:"性别"}),e(r,{prop:"department",label:"部门"}),e(r,{prop:"email",label:"邮箱"}),e(r,{prop:"update_time",label:"更新时间"},{default:c(({row:s})=>{var m;return[o("div",null,S((m=s.update_time)==null?void 0:m.slice(0,10)),1)]}),_:1}),e(r,{label:"操作",width:"180"},{default:c(({row:s})=>[o("div",null,[e(f,{type:"success",onClick:m=>V(s.id),round:""},{default:c(()=>a[4]||(a[4]=[g("编辑")])),_:2},1032,["onClick"]),e(f,{type:"danger",onClick:m=>$(s),round:""},{default:c(()=>a[5]||(a[5]=[g("删除")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])]),o("div",te,[e(I,{"page-size":1,"pager-count":7,layout:"prev, pager, next",total:v.value,"page-count":n.pageCount,"current-page":n.currentPage,onCurrentChange:P},null,8,["total","page-count","current-page"])])]),e(q,{ref_key:"CreateAdmin",ref:C},null,512),e(G,{ref_key:"EditAdmin",ref:h},null,512),e(H,{ref_key:"DeleteAdmin",ref:w},null,512)],64)}}}),fe=j(ae,[["__scopeId","data-v-a0daf91e"]]);export{fe as default};
